services:
  simple-api-server:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      SIMPLE_API_SERVER_BIND_HOST: 0.0.0.0
      SIMPLE_API_SERVER_BIND_PORT: 8080
      SIMPLE_API_SERVER_CLIENT_ID: ${SIMPLE_API_SERVER_CLIENT_ID}
      SIMPLE_API_SERVER_CLIENT_SECRET: ${SIMPLE_API_SERVER_CLIENT_SECRET}
      SIMPLE_API_SERVER_BASIC_AUTH_USERNAME: ${SIMPLE_API_SERVER_BASIC_AUTH_USERNAME}
      SIMPLE_API_SERVER_BASIC_AUTH_PASSWORD: ${SIMPLE_API_SERVER_BASIC_AUTH_PASSWORD}
      SIMPLE_API_SERVER_ENABLE_BASIC_AUTH: ${SIMPLE_API_SERVER_ENABLE_BASIC_AUTH}
      SIMPLE_API_SERVER_ENABLE_OAUTH2: ${SIMPLE_API_SERVER_ENABLE_OAUTH2}
      SIMPLE_API_SERVER_ENABLE_MTLS: ${SIMPLE_API_SERVER_ENABLE_MTLS}
      ENABLE_BASIC_AUTH: ${SIMPLE_API_SERVER_ENABLE_BASIC_AUTH}
      ENABLE_OAUTH2: ${SIMPLE_API_SERVER_ENABLE_OAUTH2}
      ENABLE_MTLS: ${SIMPLE_API_SERVER_ENABLE_MTLS}
      SIMPLE_API_SERVER_CERTS_DIR: ${SIMPLE_API_SERVER_CERTS_DIR}
      SIMPLE_API_SERVER_TLS_CERT_FILE: ${SIMPLE_API_SERVER_TLS_CERT_FILE}
      SIMPLE_API_SERVER_TLS_KEY_FILE: ${SIMPLE_API_SERVER_TLS_KEY_FILE}
      SIMPLE_API_SERVER_MTLS_CLIENT_CERT_DIR: ${SIMPLE_API_SERVER_MTLS_CLIENT_CERT_DIR}
      SIMPLE_API_SERVER_MTLS_CLIENT_CERT_FILES: ${SIMPLE_API_SERVER_MTLS_CLIENT_CERT_FILES}
    ports:
      - "${SIMPLE_API_SERVER_HOST_PORT}:8080"
    volumes:
      - "${SIMPLE_API_SERVER_CERTS_HOST_DIR}:${SIMPLE_API_SERVER_CERTS_DIR}:ro,Z"
